# üöõ AtermTrackBot: Telegram-–±–æ—Ç –¥–ª—è –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**AtermTrackBot** ‚Äî –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.  
–û–Ω –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∏—Å–ª–æ–∫–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–µ–∑–¥–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º.  
–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–æ—á—Ç–æ–≤—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∑–∞–ø—Ä–æ—Å—É –∏ —Ä–∞—Å—Å—ã–ª–∞–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º.

![–õ–æ–≥–∏—Å—Ç–∏–∫–∞](https://images.unsplash.com/photo-1504711434969-e33886168f5c?ixlib=rb-4.0.3&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1200)

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [üöÄ –ö–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#-–∫–ª—é—á–µ–≤–æ–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- [üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#Ô∏è-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#Ô∏è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [ü§ù –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥](#-–∫–∞–∫-–≤–Ω–µ—Å—Ç–∏-—Å–≤–æ–π-–≤–∫–ª–∞–¥)
- [üìú –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üöÄ –ö–ª—é—á–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### üë§ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–∏–Ω–≥** ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –ø–æ–µ–∑–¥–∞—Ö –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö.
- **–ì–∏–±–∫–∏–π –ø–æ–∏—Å–∫** ‚Äî –∑–∞–ø—Ä–æ—Å –ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –æ–±—ä–µ–∫—Ç–∞–º —Å—Ä–∞–∑—É.
- **–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ—Ç—á—ë—Ç—ã** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ Excel-—Ñ–∞–π–ª–æ–≤ —Å –¥–∏—Å–ª–æ–∫–∞—Ü–∏–µ–π –≤ 09:00 –∏ 16:00.
- **–£–¥–æ–±–Ω–æ–µ –º–µ–Ω—é** ‚Äî –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –≤ Telegram.

### üë®‚Äçüíº –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- **–ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏** (`/broadcast`) –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫.
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** ‚Äî –≤—ã–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –æ—Ç—á—ë—Ç–æ–≤ –≤ Excel.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –æ—Ç–ª–∞–¥–∫–∞.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **–Ø–∑—ã–∫:** Python 3.11+
- **Telegram API:** [python-telegram-bot v20+](https://docs.python-telegram-bot.org/)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL
- **ORM:** SQLAlchemy 2.0+ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä `asyncpg`)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** Alembic
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á:** APScheduler
- **–†–∞–±–æ—Ç–∞ —Å –ø–æ—á—Ç–æ–π:** imap-tools / smtplib
- **Excel:** pandas + openpyxl
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** python-dotenv / Pydantic (–≤–∞–ª–∏–¥–∞—Ü–∏—è env)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** logging + RotatingFileHandler

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ **–º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (multilayer architecture)**:

- **`handlers/`** ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã.
- **`services/`** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–∏–º–ø–æ—Ä—Ç Excel, —Ä–∞—Å—Å—ã–ª–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –ø–∞—Ä—Å–∏–Ω–≥ –ø–æ—á—Ç—ã).
- **`queries/`** ‚Äî SQL-–∑–∞–ø—Ä–æ—Å—ã (ORM/SQLAlchemy).
- **`models/`** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î.
- **`scheduler.py`** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–∫–∞–∂–¥—ã–µ 20 –º–∏–Ω, 08:30, 09:00, 16:00).
- **`utils/`** ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (email, –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, —ç–∫—Å–ø–æ—Ä—Ç Excel).
- **`logger.py`** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

### üìà –î–∏–∞–≥—Ä–∞–º–º–∞

```mermaid
flowchart TD
    U[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Telegram] --> H[Handlers<br/>–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –∫–Ω–æ–ø–æ–∫]
    H --> S[Services<br/>–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞<br/>–∏–º–ø–æ—Ä—Ç Excel, –ø–æ—á—Ç–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è]
    S --> Q[Queries<br/>SQLAlchemy ORM –∑–∞–ø—Ä–æ—Å—ã]
    Q --> D[(PostgreSQL Database)]
    
    subgraph BOT[Telegram Bot]
        H
        S
        Q
    end

    D -.->|Alembic –º–∏–≥—Ä–∞—Ü–∏–∏| Q
    S --> SCH[Scheduler<br/>APScheduler –∑–∞–¥–∞—á–∏]
    SCH --> S


‚∏ª

üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
	‚Ä¢	Python 3.11+
	‚Ä¢	PostgreSQL
	‚Ä¢	virtualenv (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

git clone https://github.com/your-username/AtermTrackBot.git
cd AtermTrackBot

python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

cp example.env .env

4. –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã

alembic upgrade head

5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

python bot.py


‚∏ª

‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª .env:

# --- Telegram ---
BOT_TOKEN="–í–ê–®_–¢–ï–õ–ï–ì–†–ê–ú_–¢–û–ö–ï–ù"
ADMIN_CHAT_ID="123456789"

# --- PostgreSQL ---
DB_HOST="localhost"
DB_PORT="5432"
DB_USER="postgres"
DB_PASS="password"
DB_NAME="tracker_db"

# --- –ü–æ—á—Ç–∞ (–¥–ª—è –∏–º–ø–æ—Ä—Ç–∞) ---
IMAP_SERVER="imap.example.com"
IMAP_USER="email@example.com"
IMAP_PASS="–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"

# --- –ü–æ—á—Ç–∞ (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á—ë—Ç–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ---
SMTP_SERVER="smtp.example.com"
SMTP_PORT="465"
SMTP_USER="email@example.com"
SMTP_PASS="–ø–∞—Ä–æ–ª—å_–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
EMAIL_RECIPIENT="admin@example.com"


‚∏ª

üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
	‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–ª—è IMAP/SMTP.
	‚Ä¢	–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
	‚Ä¢	–õ–æ–≥–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Grafana Loki –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

‚∏ª

ü§ù –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥
	1.	–°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫ –ø—Ä–æ–µ–∫—Ç–∞.
	2.	–°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É feature/–Ω–∞–∑–≤–∞–Ω–∏–µ.
	3.	–í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–π—Ç–µ Pull Request.
	4.	–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ: —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–∏ –∏ –∑–∞—á–µ–º.

‚∏ª

üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License.
–°–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ —É–ª—É—á—à–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç.

‚∏ª